# OnPostprocessBuild에서 빌드가 끝났을 때 코드를 실행시킬 수 있다

Unity에서 코드를 만들고  
빌드를 하게 되니  
굉장히 여러가지 불편사항들을 느낄 수 있었다.  

특히나 StreamingAsset 폴더에 로그 폴더가 있으면  
해당 폴더도 같이 빌드가 되고 같이 저장이 된다는 게 너무 불편했다.  

그래서 이 점을 어떻게 해결 할 수 있는 방법이 없을까 고민을 하다가  
이전에 빌드를 코드를 통해 할 수 있다는 것을 발견할 수 있었는데  
이를 이용하면 뭔가 빌드가 끝났을 때에 뭔가 코드를 삽입 할 수 있지 않을까  
하는 생각이 들게 되었다.  

그렇게 해서 코드를 찾아보니  
OnPostprocessBuild 라는 함수를 찾을 수 있었는데  
해당 함수는 빌드가 끝났을 때 발동되는 함수라고 한다.  

그래서 해당 함수를 사용해서 몇가지 테스트를 진행해주었는데  
정말로 빌드가 끝날쯤에 내부의 코드가 동작하는 것을 볼 수 있었다.  

그래서 이 코드에 내가 원하는 동작 몇가지를 삽입해주게 되었다.  
가장 필요한 건 로그 폴더의 삭제였고  
그 다음으론 몇가지 파일의 수정이었다.  

그렇게 진행을 해봤는데  
삭제는 어차피 삭제이기 때문에  
잘 동작하는 것을 볼 수 있었는데  
문제는 수정이었다.  

이 코드가 빌드가 완벽히 끝나면 실행되는 줄 알았는데  
그건 또 아닌 것 같았다.  
빌드가 완벽하게 끝나고 나서 실행이 되면  
파일이 완벽하게 대치가 되고나서 수정을 하는 것이라  
뭔가 파일안에서 문자열이 겹치거나 하는 현상이 일어나지 않아야하는데  
계속해서 이전에 작성했던 문자열이 남아있는 것을 볼 수 있었다.  

그래서 빌드 전의 원본 파일도 확인해보고  
읽어오는 부분에 로그도 찍어보고  
쓰는 부분에 로그도 찍어본 결과  

완벽히 대치가 이뤄지지 않은 상황에서  
도중에 읽어드리니 내가 원치않는 결과가 나온다는 것을 알게 되었다.  

그래서 결국 읽고 쓰는 로직에 예외처리를 추가해  
해당 오류가 발생하지 않도록 만들어주긴 했는데  
결론은 해당 함수가 완벽히 빌드가 끝난상태에서 동작하진 않는 다는 것이다.  