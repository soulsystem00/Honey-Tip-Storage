# 경로에 한글을 적지 말자

그냥 파일을 만들고 삭제하고 이것저것 하다보면</br>
폴더 명을 한글로 만들기도 하고 파일명을 한글로 만들기도 한다.</br>
</br>
근데 간혹 한글이 지원이 안되는 프로그램들이 존재한다.</br>
예전에 로지텍 프로그램을 깔 때 이와 같은 경험을 했는데</br>
윈도우 계정 명을 한글로 설정을 하니 User 경로에 한글이 포함이 되버렸다.</br>
그런데 로지텍 프로그램이 한글을 지원하지 않으니</br>
프로그램이 켜지지 못하고 무한 로딩에 걸리는 일이 발생했다.</br>
</br>
이를 해결하기 위해 계정명을 바꾸고 이것저것 건들여서 겨우 바꿨는데</br>
이미 설치된 프로그램들 중 바뀌기 전의 경로를 참조하고 있던 것들은</br>
오류가 발생해서 다시 설치하거나 언인트톨이 안되서 수동으로 지워주고 그랬다.</br>
</br>
이러한 일이 그냥 프로그램 설치 할 때나 생길 줄 알았는데</br>
코딩을 하면서도 이것 때문에 문제가 발생했다.</br>
</br>
ini 파일을 읽고 쓰기 위해서 아래와 같은 함수를 사용했다.</br>

```
[DllImport("kernel32")]

private static extern long WritePrivateProfileString(string section, string key, string val, string filepath);

[DllImport("kernel32")]

private static extern long GetPrivateProfileString(string section, string key, string def, StringBuilder reVal, int size, string filepath);
```

그냥 텍스트 파일 읽듯이 streamreader나 streamwriter 같은 것 사용해도 되는데</br>
이게 자동으로 형식도 만들어주고 예외처리도 쉬워서 해당 함수를 사용해서 프로그램을 만들었다.</br>
그런데 여기서 문제가 발생했는데</br>
</br>
내 컴퓨터에서는 오류 없이 잘 동작한 프로그램이</br>
테스트 pc로 옮기기만 하면 오류가 발생하는 것이었다.</br>
그래서 이를 해결하기 위해 굉장히 많은 시간을 소비했는데</br>
결론은 경로에 한글이 적혀있어서 파일을 제대로 읽어들이지 못했다는 것이다.</br>
</br>
해결이 되어서 다행이었지만</br>
굉장히 허탈했던 기억이 있다.</br>
그리고 이걸 간과하지 말자 생각을 했다.</br>
</br>
</br>
그러고나서 이제 다른 프로젝트에서 2번 모드를 추가하고나서 디버깅을 진행하는데</br>
1번 모드와 2번 모드를 비교해야하는 상황이 왔고</br>
계속 2번 모드로 실행을 했으니깐</br>
이번에는 1번 모드로 프로그램을 실행 시켰는데</br>
프로그램이 런타임 오류를 뱉었다.</br>
</br>
그래서 이를 해결하기 위해 내가 추가한 2번 모드를 빼서 실행을 시켜봤는데</br>
그래도 오류를 뱉었다.</br>
</br>
그래서 이번에는 기존에 저장소에 저장되어있던</br>
아무 작업도 안한 버전을 불러와서 실행을 시켰는데</br>
이 역시 오류를 뱉는 모습을 볼 수 있었다.</br>
</br>
그런데 이상한 점은 같은 빌드를 사용하는 인스톨로 설치한 파일은</br>
정상적으로 작동한다는 것이었다.</br>
</br>
그 이유를 알고 싶었으나</br>
프로그램은 그냥 런타임 오류만 뱉었다.</br>
그래서 이것저것 찾아보다가 그래픽 드라이버도 업데이트 해보고</br>
프로그램을 지웠다가 깔아보고 다른 pc에서도 돌려보고 별의 별 시도를 다 해봤는데</br>
소득은 없었다.</br>
</br>
아무튼 테스트를 하면서 확실해 진 것은</br>
환경의 문제보단 dll쪽의 문제 같다는 것이었다.</br>
</br>
그렇게 점점 답이 없어져가던 도중</br>
실행이 되는 pc와 실행이 되지 않는 pc의 차이에 대해 고민해보기 시작했는데</br>
그때 문득 떠오른 것이 ini파일 때 겪었던 사건이었다.</br>
</br>
그래서 설마하고 경로 상에 존재하는 한글 폴더를 영어로 바꾸어주었는데</br>
정상적으로 실행이 되는 모습을 볼 수 있었다.</br>
</br>
</br>
결론적으로는 DLL쪽의 오류가 맞았다.</br>
해당 DLL에서 한글을 지원하지 않으니</br>
그 쪽에서 런타임 에러를 뱉었던 것이었다.</br>
다만 2번 모드에서는 해당 DLL을 사용하지 않으니</br>
오류를 뱉지 않았던 것이었다.</br>
</br>
시작은 디버깅을 위한 간단한 준비였는데</br>
갑자기 이게 본 문제가 되어버려서</br>
이것 때문에 몇 시간을 날렸는지 모르겠다.</br>
물론 원인을 발견하고 해결책을 찾아서 정말 다행인 건 맞는데</br>
너무 허무한 느낌이 드는 건 어쩔 수 없는 것 같다.</br>
</br>
아무튼 두 번의 과정을 통해</br>
한글 경로는 위험하다는 것을 깨닳았다.</br>
그래서 내 pc에서는 되도록이면 한글 경로는 지양하는데</br>
테스트 pc이다보니 신경을 못썼다.</br>
진짜 한글 경로 절대 쓰면 안되겠다.</br>
</br>
</br>
</br>
</br>
</br>
### 잡담
```
진짜 이것 때문에 몇 시간을 날렸는지;;

이번 디버깅은 시간이 오래 걸리는 디버깅이라 1분 1초가 소중한데
갑자기 이런 어이없는 문제에 도달해서 
시간을 낭비를 했다는 기분이 들었다.

근데 결국 이것도 경험 부족이라고 생각한다.
만약에 이런 문제를 뼈저리게 경험한 사람이었으면
오류 창을 보자마자 혹은 약간의 테스트 이후
경로를 먼저 의심해보지 않았을까 하는 생각도 들었다.

확실히 아직은 많이 부족한 것 같다.
```