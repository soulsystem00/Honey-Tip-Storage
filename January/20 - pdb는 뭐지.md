# PDB 파일은 뭐지?

유니티에서 빌드 설정으로 들어가면</br>
여러가지 옵션들이 보인다.</br>
그 중에서 가장 자주 사용하는 옵션은 Development Build인데</br>
그 외에 많은 옵션들이 존재하는데</br>
그 중 하나가 Copy PDB files라는 옵션이 있다.</br>
</br>
이 옵션을 체크한 상태에서 빌드를 진행하면</br>
기존에는 없었던 pdb 확장자의 파일들이 생성 된다.</br>
</br>
프로그램이 크래시가 나게 되면 덤프파일과 로그가 생성된다.</br>
그런데 그 로그를 살펴보면 크래시에 대한 정보가 들어있긴 한데</br>
도대체 어디서 어떻게 크래시가 났는지 보기가 힘들다.</br>
</br>
그래서 해당 로그 및 덤프파일을 보는 방법에 대해 찾아봤는데</br>
WinDbg로 살펴보면 되고 거기서 필요한 것이 pdb 파일이라고 했다.</br>
왜냐하면 pdb 파일은 프로그램에 대한 정보가 들어있어서</br>
오류가 나게 되면 오류가 난 부분에 대한 정보를 pdb 파일을 통해 알 수 있기 때문이다.</br>
</br>
그런데 결국 어떻게 사용해야 하는지 터득하진 못하고 삽질만 하다가 끝났다.</br>
</br>
</br>
그러다가 유니티 프로그램 디버깅을 해야하는 상황이 발생했고</br>
```
Application.logMessageReceived += HandleLog;
```
해당 코드를 통해 로그를 남기던 도중</br>
이상한 점을 발견 할 수 있었다.</br>
</br>
만약에 오류가 발생하면 로그 메세지 뿐만 아니라 StackTrace 까지 남기도록 만들었는데</br>
빌드를 진행한 pc에서는 StackTrace가 잘 나오는 모습을 볼 수 있었고.</br>
오류가 어떤 스크립트의 몇번째 줄에서 발생했는지 알 수 있어</br>
손쉽게 디버깅을 진행할 수 있었다.</br>
</br>
그런데 테스트 pc에서 오류가 발생하면</br>
StackTrace가 이상하게 남는 현상을 볼 수 있었다.</br>
분명히 오류가 발생한 지점이 남아야 하는데</br>
pc만 바꾸면 이상한 값으로 남았고 오류 발생지점을 모르다보니</br>
디버깅을 하는데 상당한 고생을 할 수 밖에 없었다.</br> 
</br>
그러다가 문득 pdb 파일이 떠오르게 되었는데</br>
설마 이 파일이 없어서 StackTrace가 제대로 안뜨나 싶었고</br>
그래서 해당 파일도 같이 옮겨서 테스트를 진행을 해주니</br>
내 pc에서 돌렸을 때 처럼 오류 발생 지점이 정확히 뜨는 모습을 볼 수 있었고</br>
이를 통해 pdb 파일의 역할에 대해 알 수 있게 되었다.</br>
</br>
그런데 이 파일이 프로그램에 대한 정보를 담고 있다보니</br>
배포 시에는 꼭 제외를 시키고 배포를 해야한다고 한다.</br>
</br>
아무튼 이러한 차이를 알게 되었으니</br>
앞으로의 디버깅이 보다 편해질 것 같다.</br>
</br>
</br>
</br>
</br>
</br>
### 잡담
```
이전에 덤프파일 디버깅 하겠다고
삽질 했다가 실패를 한 경험이 있었는데
이것이 헛된 일이 아니었다는 것을 알 수 있었다.
덕분에 pdb 파일의 존재에 대해 알게 되었으니 말이다.

근데 정말로 pdb 파일 때문인지를 모르겠다.
pdb 파일 뿐만 아니라 같이 생성된 dll도 옮겨주었기 때문이다.
그래서 pdb 파일을 삭제해보고 테스트도 진햏해봐야 하는데
시간이 없어서 그 부분은 진행하지 못했다.

아무튼 새로운 지식을 알 수 있게 되어서
굉장히 뿌듯했다.

아마 내일은 특별한 일이 없으면
비동기 올릴 것 같다.
```