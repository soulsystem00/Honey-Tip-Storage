# 추상 클래스에는 싱글톤을 피하자

추상 클래스는 말그대로 추상 클래스이다.</br>
추상화가 되어있는 클래스이지 실체화 되어있는 클래스가 아니다.</br>
그렇기 때문에 추상 클래스를 메모리에 올리는 인스턴스화가 불가능하다.</br>
</br>
그런데 의식의 흐름에 따라 코드를 짜다보니</br>
싱글톤 클래스를 상속받는 추상 클래스를 만들게 되었다.</br>
도대체 왜 그렇게 되었는지는 잘 기억이 나진 않는다.</br>
</br>
그런데 컴파일러에서 에러가 뜨질 않았기 때문에</br>
이대로도 잘 동작을 하는구나 생각을 했고</br>
그렇게 이어서 작업을 하게 되었는데</br>
여기서 오류가 발생하게 되었다.</br>
아래가 예시 코드이다.</br>

```
abstract class A : MonoSingleton<A>
{

}

class B : A
{

}

static void Main()
{
    A a = B.Instance;
}
```

대충 요런 코드였는데</br>
B.Instance를 하면 B 클래스가 인스턴스화 되어서 들어갈 줄 알았는데</br>
그게 아니라 A 클래스를 인스턴스화 시키려고 하는 걸 볼 수 있었고</br>
A 클래스는 추상 클래스이기 때문에 인스턴스화가 되지않아서 </br>
정상적인 동작이 이뤄지질 않았다.</br>
</br>
그래서 왜 A 클래스를 인스턴스화 시키려고 하는지</br>
다시한번 살펴봤는데</br>
그냥 너무나도 당연하게 `MonoSingleton<A>` 부분에서</br>
T 가 A로 설정이 되어있기 때문에 </br>
당연히 new를 하는 부분에서도 new A() 이런식으로 인스턴스화가 진행이 된다는 것을</br>
알 수 있었다.</br>
</br>
그래서 차라리 A에도 템플릿을 넣어서</br>
이중으로 템플릿이 들어가게 만들던가 하면 되면 될텐데</br>
또 그러면 이것저것 복잡해지고 </br>
템플릿을 또 설정해줘야하고 </br>
</br>
아무튼 그렇게 하는 것 보다</br>
그냥 클래스 B가 직접 monosingleton 상속을 받고 </br>
추상클래스 A는 인터페이스로 돌리는 식으로 구현을 하게 되었다.</br>
</br>
물론 추상클래스가 모노싱글톤을 상속받고</br>
그 추상클래스를 상속받는 클래스를 만들고</br>
그걸 이렇게 저렇게 잘 사용을 하는 사람도 있겠지만</br>
나는 그렇게 못할 것 같다.</br>
</br>
그냥 맘 편한게 인터페이스 사용하려고 한다.</br>
</br>
</br>
</br>
</br>
</br>
### 잡담
```
이건 컴파일러에서 오류를 내뱉지 않는 종류의 오류였다.

컴파일러에서 오류를 내뱉지 않으니깐
뭔가 이상하지만 내가 생각한대로 
B 클래스가 인스턴스화 되어서
동작하겠구나 생각했는데 그게 아니었고

동작을 하다가 오류를 내뱉어버렸다.

추상 클래스를 인스턴스 시키려면 오류를 잘 뱉으면서
이렇게 조금 꼬으니깐 오류를 내뱉지 않는게 신기하기도 했다.

그래서 이걸 믿고
해당 부분 코드 작성을 다 했다가
정상작동이 안되어서
결국 인터페이스를 사용하도록 싹다 수정을 해야했다.
```