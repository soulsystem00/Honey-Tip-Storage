# volatile 이란?

volatile 키워드는 변수 앞에 적어서 사용할 수 있다.</br>
```
volatile int foo;
```
대충 요런 식으로</br>
</br>
근데 이게 뭘까</br>
찾아봤는데</br>
굉장히 여러가지 역할들을 하는 것 같다.</br>
</br>
일단 최적화 관련인데</br>
컴파일러에서는 코드를 어느정도 최적화를 시켜준다고 한다.</br>
그런데 이런식으로 최적화를 시키게 되면</br>
특정 상황에서 오류가 발생할 수 있다.</br>
그렇기 때문에 이러한 최적화를 시키지 않게 만들어 준다.</br>
</br>
</br>
다음으로는 메모리 관련인데</br>
보통 변수를 선언을 하면 캐시에 저장을 하고 읽고 쓰기를 진행한다.</br>
그런데 캐시에 저장하지 말고 메모리에 저장해서 읽고 쓰기를 하라고 시키는 것이다.</br>
</br>
여려개의 쓰레드가 공유하는 변수가 있을 때 각 쓰레드들은 각자 메모리에 위치한 값을 캐시에 복사해와서 사용을 하게 된다</br>
이렇게 하면 각 쓰레드들이 다른 값을 가지고 있는 경우가 생기게 된다.</br>
이러한 경우를 방지하고자 캐시에 저장을 하게 만드는게 아니라</br>
메모리에서 읽어오게 끔 만들어주는 것이다.</br>
</br>
이렇게 하면 하나의 쓰레드에서 값을 변경시켰을 때</br>
다른 쓰레드에도 영향을 미칠 것이다.</br>
어떻게 보면 각 쓰레드에선 최신의 값을 알 수 있게 될 것이다.</br>
</br>
</br>

최적화를 없애 임의로 변수가 설정되는 것을 막아</br>
개발자가 의도한대로 값이 설정되게 만들어주고</br>
이 변수를 참조하는 곳에 최신의 값을 얻어올 수 있도록 만들어주는 것 같다.</br>
</br>
결론적으로 하나의 변수를 여러 곳에서 사용을 할 때</br>
오류가 없도록 만들어주는 역할을 하는 것 같다.</br>
</br>
그렇게 하므로써 하드웨어 쪽에서 변수가 변경이 되거나</br>
멀티 쓰레드 환경에서 같은 값을 참조할 때 오류가 없도록 만들어주는 것 같다.</br>
</br>
</br>
그런데 멀티쓰레드 환경에서는 어느정도의 기능만 해줄 뿐이지</br>
동기화를 해주는 장치는 아닌 것 같다.</br>
그렇기 때문에 변수의 동기화를 위해서라면 lock이나 mutex를 사용하는 걸 추천한다고 한다.</br>
</br>
