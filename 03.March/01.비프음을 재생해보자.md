# 비프음을 재생해보자

이번에 프로젝트를 만들면서  
사운드 매니저를 추가하게 되었는데  
어찌 되었던 간에 결국 사운드 파일이 필요했다.  

다른 프로젝트에서 가져오면 되겠지만  
솔직히 너무 귀찮았고  
그래서 그냥 코드로 해결하려고 했다.  

그렇게 선택한 방법이  
바로 비프음이다.  
</br>
</br>
이전에 정말 심심해서  
윈폼을 이용해서 메트로놈을 만든적이 있었는데  
그때 사용을 한게 비프음이었다.  

주파수와 길이를 지정해서 재생을 시킬 수 있었고  
이걸 이용하면 노래까지 재생시킬 수 있겠다 싶었는데  
딱히 기회가 없다가  
그냥 이번에 귀찮은 김에 비프음을 이용해 임시로 사운드를 넣어보자 생각을 했다.  

그렇게 사용한 코드가 다음과 같다.  

```
Console.Beep(frequency, duration)
```

중요한 건 이제 유니티에선 동작하지 않았다는 것이다.  
콘솔 클래스에 있는 함수라 작성을 하면서 의아하긴했지만  
그래도 재생되지 않을까 하는 기대가 있었는데  
보기 좋게 기대가 무너졌다.  

그래서 다른 방법을 찾던 중  
다른 방법을 찾게 되었는데 바로 아래와 같다.  

```
[DllImport("KERNEL32.DLL")]
extern public static void Beep(int frequency, int duration);
```

함수의 사용법은 위와 같지만  
DLL을 임포트 해서 사용하는 형식이었다.  
위 함수가 안되어서 해당 함수도 동작하지 않을까 생각했지만  
이 함수는 제대로 동작하는 모습을 볼 수 있었다.  

어쩌면 콘솔 클래스의 함수의 원형이 아닐까하는 생각이 들었다.  

그러다가 다른 함수도 발견하게 되었는데  
아래와 같다.  

```
[DllImport("user32.dll")]
static extern int MessageBeep(uint uType);
```

일단 함수 이름이 Beep로 되어있어서  
이 함수 역시 비프음을 재생시켜주겠거니 생각했는데  
이 함수는 비프음을 재생시켜주는게 아니라  
윈도우 경고음을 출력시키는 역할을 담당하고 있었다.  

사운드 타입을 파라미터로 전송하면  
해당 사운드 타입에 맞는 사운드를 재생시켜주는데  
보통 윈도우에서 들을 수 있는 여러가지 경고음들이었다.  

그래서 이건 별로 사용할 데가 없어보였다.  
</br>
</br>
아무튼 이 비프음을 통해서  
단순히 한번만 재생을 시켜보았지만  
갈수록 귀찮음이 더해졌고  
그래서 그냥 사운드 임포트 하지말고  
그냥 임시긴 하지만 싹다 비프음으로 대체해보자 생각을 해서  
구글링을 통해 비프음으로 되어있는 노래 코드를 찾아 작성을 해주었고  
재생을 시켜보았다.  

그런데 여기서 신기한 점을 발견 할 수 있었는데  
해당 함수들이 동기적으로 진행이 된다는 것이었다.  

뭐 딱히 비동기 적으로 코드를 짜지 않았으니  
당연한 일일 수도 있지만  

Beep 함수 같은 경우엔
비프음을 재생시켜주는 하드웨어에 명령을 내리는 역할만  
담당하는 줄 알았다.   

그러니깐 재생이 되던 말던 그 응답을 기다리지 않고  
바로 이어서 다음 비프음에 대한 명령을 내리는 식으로 동작 할 줄 알았는데  

그게 아니라 비프음이 다 끝날 때 까지 대기를 하고 있는 모습을 볼 수 있었다.  
즉, 비프음을 통해 1시간 짜리 노래를 재생시켰다고 한다면  
1시간 짜리 노래가 다 끝나야 다음 코드가 진행이 되는 형식이었다.  

그래서 카운트 다운을 구현해주고  
카운트 마다 비프음을 재생시켜주는 코드를 만들어주었는데  
해당 로직을 약간 바꿔서 비프음의 재생을 쓰레드에서 담당하도록 만들어주었다.  

이런 부분은 약간 예상하지 못했지만
정말 신기하게 다가왔다.  
</br>
</br>
</br>
</br>
</br>