# 조건 검사를 하고 연산을 하자

```
class A
{
    void Update()
    {
        count--;

        count = Mathf.Max(0, count);

        if(count > maxCount)
        {
            //Todo

            return;
        }
    }
    
    void Foo()
    {
        count += 2;

        count = Mathf.Min(maxCount, count);
    }
}

class B
{
    void OnTriggerStay()
    {
        A.Foo();
    }
}
```

대충 요런 식으로 코드를 만들었다.  

일단 트리거에 들어와있으면 카운트가 증가하고  
트리거에 빠져나간 상태면 카운트가 감소하게 만들어주었다.  

그리고 카운트가 최대 값을 넘어가면  
원하는 동작이 이뤄질 수 있도록 만들어주었다.  

그런데 이 코드에 2가지 문제점이 존재하고  
이 때문에 정상적으로 동작하지 않는 코드가 된다.  
2가지 문제 중 1개만 해결되더라도 정상적으로 동작 할 것이다.  

첫째로는 Foo 함수에서 count 값을 최대 값과 비교해  
제한을 걸어 놓은 부분이다.  
사실 이 부분 만으로는 문제가 발생하지 않으나  

두번째 문제인 Update에서 검사를 하기 전  
count 값을 감소시키는 부분과 연계가 되어서 문제가 발생하게 된다.  

가장 근본적인 문제는 검사 전 count 감소시킨다는 것이다.  
maxCount가 10이라고 해보자  
Foo 함수를 통해서 count를 10으로 만들게 되면  
이후에 검사를 통해서 원하는 함수가 실행이 되어야 하는데  

10이 되어도 일단 감소를 먼저 시키게 되고  
이러면 10이 되어도 이후에 감소 구문에 의해 9가 되고   
이후로 검사를 할 때 false가 되어서  
원하는 동작이 실행되지 않게 된다.  

물론 이후에 Foo 함수에서 count를 증가시켜 11로 만들면  
Update에서 감소가 되어도 10이 되기 때문에  
원하는 동작이 가능할태지만  

Foo 함수에서도 최대 값이 10이 되도록 제한을 걸어놓았기 때문에  
결국 count는 최대 값에 도달하지 못하고  
계속해서 원하는 구문이 실행되지 않는 상태가 만들어질 것이다.  

앞서 말했다싶이  
둘 중 하나만 해결이 되면 동작이 되겠지만  
일단 가장 근본적인 문제는 검사가 나중에 이뤄지는 것 같다.  

그렇기 때문에 상황마다 다르긴 하겠지만  
이러한 류의 구문에선 검사를 먼저 하는 것이 맞을 것 같다.  
</br>
</br>
</br>
</br>
</br>
### 잡담
```

```
